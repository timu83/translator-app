<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TR ↔ EN Çeviri</title>
  <style>
    :root{--ink:#e6eef8;--muted:#9bb3c7;--line:#1e2a36;--brand:#1b5cff;--brand2:#2d6bff}
    *,*::before,*::after{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#09121a,#0b0f14);color:var(--ink);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    .wrap{max-width:980px;margin:40px auto;padding:0 20px}
    .card{background:#121a22;border:1px solid var(--line);border-radius:18px;padding:20px;box-shadow:0 12px 40px rgba(0,0,0,.28)}
    h1{margin:0 0 12px;font-size:22px}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:12px}
    select,button{height:40px;border-radius:12px;border:1px solid var(--line);background:#0f1620;color:var(--ink);padding:0 12px;cursor:pointer}
    button.primary{background:var(--brand);border-color:var(--brand2);font-weight:600}
    button:disabled{opacity:.6;cursor:not-allowed}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:860px){.grid{grid-template-columns:1fr 1fr}}
    textarea{
      width:100%;
      height:260px;
      padding:14px;
      border-radius:14px;
      border:1px solid var(--line);
      background:#0f1620;
      color:var(--ink);
      resize:none;     /* sağ alt köşe kapalı */
      outline:none;
    }
    textarea:focus{border-color:#2a8bff;box-shadow:0 0 0 3px rgba(42,139,255,.18)}
    .muted{color:var(--muted);font-size:12px}
    .status{padding:4px 8px;border-radius:999px;border:1px solid var(--line);font-size:12px;color:var(--muted)}
    .status.ok{color:#c9f7df;border-color:rgba(46,204,113,.35);background:rgba(46,204,113,.08)}
    .progress{height:3px;background:#0c1220;border-radius:999px;overflow:hidden;margin-top:10px;display:none}
    .progress>div{height:100%;background:linear-gradient(90deg,var(--brand),var(--brand2));animation:indet 1.2s infinite}
    @keyframes indet{0%{transform:translateX(-30%);width:30%}50%{transform:translateX(30%);width:60%}100%{transform:translateX(140%);width:30%}}
    .footer{display:flex;gap:10px;justify-content:flex-end;margin-top:12px;flex-wrap:wrap}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>TR ↔ EN Çeviri</h1>

      <div class="toolbar">
        <label for="direction" class="muted">Yön</label>
        <select id="direction">
          <option value="tr2en">Türkçe → İngilizce</option>
          <option value="en2tr">İngilizce → Türkçe</option>
        </select>
        <button id="swap">Değiştir</button>
        <button id="translate" class="primary">Çevir</button>
        <span class="muted">Ctrl/Cmd + Enter</span>
        <span id="status" class="status">Hazır</span>
      </div>

      <div class="grid">
        <textarea id="input" placeholder="Çevrilecek metni yaz veya yapıştır"></textarea>
        <textarea id="output" placeholder="Çeviri burada görünecek" readonly></textarea>
      </div>

      <div id="progress" class="progress"><div></div></div>

      <div class="footer">
        <button id="copy">Kopyala</button>
        <button id="clear">Temizle</button>
      </div>
    </div>
  </div>

  <script>
    const $ = s => document.querySelector(s)
    const input = $('#input'), output = $('#output'), dir = $('#direction')
    const statusEl = $('#status'), progress = $('#progress'), btn = $('#translate')

    function setBusy(b,msg){
      btn.disabled = b
      statusEl.textContent = msg || (b ? 'Çevriliyor' : 'Hazır')
      statusEl.className = 'status' + (b ? '' : ' ok')
      progress.style.display = b ? 'block' : 'none'
    }

    async function translate(){
      const text = input.value.trim()
      if(!text) return
      setBusy(true,'Çevriliyor')
      try{
        const r = await fetch('/api/translate',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({ text, direction: dir.value })
        })
        const data = await r.json()
        if(!r.ok) throw new Error(data?.error||'Hata')
        output.value = data.translation || ''
        setBusy(false,'Bitti')
      }catch(e){
        console.error(e)
        setBusy(false,'Hata')
      }
    }

    $('#translate').addEventListener('click', translate)
    $('#swap').addEventListener('click', ()=>{
      dir.value = dir.value==='tr2en' ? 'en2tr' : 'tr2en'
      const t = input.value; input.value = output.value; output.value = t
      input.focus()
    })
    $('#copy').addEventListener('click', async ()=>{
      if(!output.value) return
      try{ await navigator.clipboard.writeText(output.value); statusEl.textContent='Kopyalandı' }catch{}
    })
    $('#clear').addEventListener('click', ()=>{
      input.value=''; output.value=''
      statusEl.textContent='Hazır'
      input.focus()
    })
    document.addEventListener('keydown', e=>{
      if((e.ctrlKey||e.metaKey) && e.key==='Enter') translate()
    })
  </script>
</body>
</html>
